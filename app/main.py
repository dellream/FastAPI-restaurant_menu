from fastapi import FastAPI

from app.api.menus.routers.dish_routers import dish_router as dish_routers
from app.api.menus.routers.menu_routers import menu_router as menu_routers
from app.api.menus.routers.submenu_routers import submenu_router as submenu_routers

# from app.config import CELERY_STATUS
# from app.tasks.tasks import update_base

description = """
REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞. üöÄ

### –ú–µ–Ω—é

- –í—ã –º–æ–∂–µ—Ç–µ **—Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø–æ–ª—É—á–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é**.
- –í –æ–¥–Ω–æ–º –º–µ–Ω—é –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–º–µ–Ω—é.

### –ü–æ–¥–º–µ–Ω—é

- –í—ã –º–æ–∂–µ—Ç–µ **—Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø–æ–ª—É—á–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ø–æ–¥–º–µ–Ω—é**.
- –í –æ–¥–Ω–æ–º –ø–æ–¥–º–µ–Ω—é –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª—é–¥.
- –û–¥–Ω–æ –∏ —Ç–æ–∂–µ –ø–æ–¥–º–µ–Ω—é –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ–Ω—é –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

### –ë–ª—é–¥–∞

- –í—ã –º–æ–∂–µ—Ç–µ **—Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø–æ–ª—É—á–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –±–ª—é–¥–∞**.
- –û–¥–Ω–æ –∏ —Ç–æ–∂–µ –±–ª—é–¥–æ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥–º–µ–Ω—é –∏–ª–∏ –º–µ–Ω—é –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –ë–ª—é–¥–æ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–¥–º–µ–Ω—é –∏ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º –º–µ–Ω—é.

–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ —É–¥–µ–ª–µ–Ω–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –º–æ–µ–º—É –ø—Ä–æ–µ–∫—Ç—É, –º–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∏–∂–µ:
"""
tags_metadata = [
    {
        'name': '–ú–µ–Ω—é',
        'description': '–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –º–µ–Ω—é.',
    },
    {
        'name': '–ü–æ–¥–º–µ–Ω—é',
        'description': '–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–¥–º–µ–Ω—é –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é.',
    },
    {
        'name': '–ë–ª—é–¥–∞',
        'description': '–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–ª—é–¥–∞–º–∏ –∏–∑ –ø–æ–¥–º–µ–Ω—é.',
    },
]

app = FastAPI(
    title='–ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞',
    description=description,
    version='1.0.1',
    contact={
        'name': '–Ø–∫–∏–º–æ–≤ –ê–ª–µ–∫—Å–µ–π',
        'url': 'https://github.com/dellream'
    },
    openapi_tags=tags_metadata
)

app.include_router(menu_routers)
app.include_router(submenu_routers)
app.include_router(dish_routers)


# @app.on_event('startup')
# async def on_startup():
#     """–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
#     –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ë–î –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î."""
#     if CELERY_STATUS:
#         update_base.delay()
